(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{361:function(e,t,a){"use strict";a.r(t);var s=a(42),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"config-v1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#config-v1"}},[e._v("#")]),e._v(" Config V1")]),e._v(" "),a("p",[e._v('Using a monolithic project structure for your assets is considered "legacy" since version 3.0.0 of this package. As it is still a requirement for a lot of projects, we keep support for this kind of asset-structure for the foreseeable future.')]),e._v(" "),a("p",[e._v("To provide all features, we use an internal adapter-layer to render your assets using builder version 2, if possible. The adapter will also make sure that your assets will land at the specified output locations.")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v('Make sure you set the "builderVersion" option to 1!')])]),e._v(" "),a("h2",{attrs:{id:"js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#js"}},[e._v("#")]),e._v(" js")]),e._v(" "),a("p",[e._v('This configuration has to be an array, as you may have multiple combinations of entry points and output files. The basic rule is that webpack loads your "entry" file and converts it into the "output" file, combining all included files into on.\nThe file paths have to be relative to your package.json.')]),e._v(" "),a("p",[e._v("By default, the script will assume you are writing es6 or Typescript and\ntranspile it down to es5, so it is compatible with IE10 and higher.")]),e._v(" "),a("p",[e._v('If the "build" mode is used, the scripts will be minified.')]),e._v(" "),a("p",[e._v("Source maps of your files will automatically be created at OUTPUT_FILE.map.")]),e._v(" "),a("p",[e._v("Additionally, you can add a custom webpackConfig here as well. See the root webpackConfig for further details.")]),e._v(" "),a("p",[e._v("Furthermore, you now have the option to suppress warnings during the build via the warningsIgnorePattern, which is a RegExp.\nThis is especially useful if you have certain warnings raising in a build, and you don't want the asset-building to exit with code 1.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('"labor": {\n  "builderVersion": 1,\n  "js": [\n    {\n      "entry": "./webroot/js/application.js",\n      "output": "webroot/js/bundle.js",\n      "webpackConfig": {\n        "target": "node"\n      },\n      "warningsIgnorePattern": "Pattern to check against the warnings to ignore them as RegEXP"\n    }\n  ]\n}\n')])])]),a("h2",{attrs:{id:"copy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#copy"}},[e._v("#")]),e._v(" copy")]),e._v(" "),a("p",[e._v('There are a lot of use cases where you have to copy files from a destination to an output directory automatically. You can have multiple copy-jobs for a single project, so make sure that your "copy" node is an array of configuration objects.')]),e._v(" "),a("p",[e._v('This option is built on top of the "copy-webpack-plugin". Take a look at their '),a("a",{attrs:{href:"https://github.com/webpack-contrib/copy-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[e._v("Documentation"),a("OutboundLink")],1),e._v(" for how to use it in detail. In this example, we will only take a look at the defaults and the minor syntax changes we made.")]),e._v(" "),a("p",[a("strong",[e._v("The change")]),e._v(': by default, you can only copy files from a single source into an output directory. I changed it so that "from" can also work with arrays of sources. Apart from that everything is straight forward.')]),e._v(" "),a("p",[e._v("Say what ("),a("strong",[e._v("from")]),e._v(") is copied, where ("),a("strong",[e._v("to")]),e._v('), and you should be good to go. If you want to exclude some files, you can always use "'),a("strong",[e._v("ignore")]),e._v('" for that. Keep in mind that both "from" and "ignore" support glob values.\nIf you don\'t want to flatten everything into a directory set, "flatten: false".'),a("br"),e._v('\nTypically files are copied after all other build steps. Via "first: true" you can set a copy-operation to be processed before the other build-steps.'),a("br"),e._v('\nSometimes you have copy-tasks, which should be executed if it\'s a build and not in a watch.\nSet "inBuildOnly: true" in such a case.')]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('"labor": {\n    "builderVersion": 1,\n    "copy": [\n        {\n            "from": [\n                "assets/a/*",\n                "./assets/b/**/b2.png",\n                "./assets/**/asset.png"\n            ],\n            "to": "webroot/assets",\n            "ignore": ["*.jpg", "assets/a/c"],\n            "flatten": false,\n            "first": false,\n            "inBuildOnly": false\n        }\n    ]\n}\n')])])]),a("h2",{attrs:{id:"polyfills"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#polyfills"}},[e._v("#")]),e._v(" polyfills")]),e._v(" "),a("p",[e._v("As stated in the section "),a("strong",[e._v("Typescript, ES6, and Polyfills")]),e._v(", you\nmay also define polyfills that should be provided for your application. Those will be added to the default polyfills, which are always provided.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('"labor": {\n  "polyfills": ["core-js/fn/array/fill"]\n}\n')])])]),a("h2",{attrs:{id:"usetypechecker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usetypechecker"}},[e._v("#")]),e._v(" useTypeChecker")]),e._v(" "),a("p",[e._v('By default, we use ts-loader\'s "transpileOnly" option\nto save a lot of time while compiling your scripts. If you want to use\nthe typescript-type checker, set this option to true. '),a("em",[e._v("Note from the author: Get a cup of coffee, this will take a while")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('"labor": {\n    "builderVersion": 1,\n    "useTypeChecker": true\n}\n')])])]),a("h2",{attrs:{id:"jscompat"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jscompat"}},[e._v("#")]),e._v(" jsCompat")]),e._v(" "),a("p",[e._v('Sometimes you have to fix an old JS library, which does not work nicely with webpack.\nIn this case, the "imports-loader" comes to your rescue.\nThis configuration registers the module and make it a little bit easier to write.\nFor all configuration options take a look at '),a("a",{attrs:{href:"https://github.com/webpack-contrib/imports-loader",target:"_blank",rel:"noopener noreferrer"}},[e._v("imports-loader"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("p",[e._v("As general rule => test and fix => loader in the other documentation.")]),e._v(" "),a("ul",[a("li",[e._v('"rule" is a regex of a filename -> as a string in a JSON file. Without delimiters!')]),e._v(" "),a("li",[e._v('"fix" is the definition for the imports-loader, e.g., a mapping of one value to another')])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('"labor": {\n  "builderVersion": 1,\n  "jsCompat": [\n    // A simple remapping of one value to another\n    {\n      "rule": "my-file\\\\.js$",\n      "fix": "win=>window"\n    },\n    // Some JS libs need specially point e.g. "this" to "window".\n    {\n      "rule": "my-old-lib\\\\.js$",\n      "fix": "this=>window"\n    }\n  ]\n}\n')])])]),a("h2",{attrs:{id:"css"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#css"}},[e._v("#")]),e._v(" css")]),e._v(" "),a("p",[e._v('The general idea is the same as with "js," but for, well, CSS files.\nYou can also have multiple combinations of entry points and output files. So the "css" option has to be an Array containing your combinations as well. The file paths have to be relative to your package.json.')]),e._v(" "),a("p",[e._v('Valid file extensions are currently .css, .less, .scss and .sass.\nIn general, you should keep your entry point in the same language as the rest of your styles, but you can mix and match between multiple languages.\nFor advanced configuration of stylesheet building, take a look at\n"demo1/webroot/css/src/frontend/frontend.css".')]),e._v(" "),a("p",[e._v('If the "build" mode is used, the scripts will be minified automatically.')]),e._v(" "),a("p",[e._v("Source maps of your files will automatically be created at OUTPUT_FILE.map.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('"labor": {\n  "builderVersion": 1,\n  "css": [\n    {\n      "entry": "./webroot/css/src/backend/backend.sass",\n      "output": "webroot/css/backend.css"\n    },\n    {\n      "entry": "webroot/css/src/frontend/frontend.css",\n      "output": "./webroot/css/frontend.css"\n    }\n  ]\n}\n')])])]),a("h2",{attrs:{id:"webpackconfig"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpackconfig"}},[e._v("#")]),e._v(" webpackConfig")]),e._v(" "),a("p",[e._v("There might be a time where our preconfigured webpack is not enough for your needs,\nin that case, you can always alter the webpack configuration using this option.")]),e._v(" "),a("p",[e._v("Because the webpack config is mostly a js object we need to extend it using\njavascript as well. To do so, lets create a new file called webpack.config.js in your\nproject root:")]),e._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" merge "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'webpack-merge'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[e._v("exports")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[e._v("context")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n   context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("webpackConfig "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("merge")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("webpackConfig"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Additional configuration for webpack...")]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),a("p",[e._v("To tell the config builder to use your configuration file, add the script\nwith a path relative to your package.json to your app configuration. Or, if you\nfollow the convention by calling the file webpack.config.js, you can set the parameter to true.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('"labor": {\n  "builderVersion": 1,\n  [...],\n  "webpackConfig": TRUE\n}\n')])])]),a("p",[e._v("But in some cases, we only need to set or overwrite some webpack config settings. If so, we can write these additional settings as an object.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('"labor": {\n  "builderVersion": 1,\n  [...]\n  "webpackConfig": {\n    "target": "node",\n    "output": {\n      "libraryTarget": "umd"\n    }\n  }\n}\n')])])])])}),[],!1,null,null,null);t.default=n.exports}}]);